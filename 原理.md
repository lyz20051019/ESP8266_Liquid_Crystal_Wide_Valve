基本原理解释：\
首先ESP8266有三种工作模式：STA(Station),AP(Access Point),STA+AP\
STA就是像我们手机一样，连接到某个WIFI，然后我们手机也连接到某个WIFI就可以通过TCP/IP和它通信（我们没有采用这种方法）。\
AP就是它作为WIFI的接入点（AP），我们手机连接它，然后与它进行通信，就像我们和路由器通信一样，也是通过TCP/IP。（这是我们采用的方法）\
STA+AP就是混合模式。\
我们项目分为主文件main.ino,src/softAP/softAP.h,src/readhtml/readhtml.h。\
main是执行主要函数的部分，softAP.h是我拆分出来为了实现初始化WIFI，以及设置重定向所有链接到我们设置的网页的功能。readhtml.h是存放网页（通过index_html变量存放网页，因为ESP8266不是很方便读取文件）。\
具体的工作原理是：初始化部分：main中初始化串口通信，初始化tft对象（用于控制液晶屏），引用softAP初始化网络部分，softAP引用readhtml生成网页。\
softAP中：
```language
dnsServer.start(DNS_PORT, "*", apIP);
```
将所有访问解析到esp8266的地址，同时

```language
    server.onNotFound([]() {
        server.send_P(200, "text/html; charset=UTF-8", index_html);  
    });
```
确保能重定向至我们的网页

```language
server.on("/", handleRoot);
void handleRoot() {
    server.send_P(200, "text/html; charset=UTF-8", index_html);
}
```
将所有访问根目录的请求定向至默认的网页\
接下来是工作部分：首先用户连接至WIFI，会自动跳转到操作网页，接着当用户点击操作按钮时：

```language
<button class="diffraction-btn" onclick="triggerDanfengFunc()">单缝衍射</button><br>
```
这里指定了当点击的时候会执行网页script部分的函数。
对应：

```language
        function triggerShuangfengFunc() {
            let num = document.getElementById("numInput").value;
            let xhr = new XMLHttpRequest();
            xhr.open("POST", "/trigger/shuangfeng", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send("num=" + num); // 传递数字参数
        }
```
会新建一个请求，并将数据通过后缀参数传入响应路径而主函数中有定义对于路径的响应函数。
即会访问.../trigger/shuangfeng路径
```language
server.on("/trigger/shuangfeng", handleShuangfengTrigger);
```
会执行主程序中的handleShuangfengTrigger函数

```language
void handleShuangfengTrigger() {
    if (server.hasArg("num")) {
        int num = server.arg("num").toInt(); //读取传递的参数
        if (num >= 0 && num <= TFT_WIDTH - 2) {
            shuangfengNum = num;
            triggerShuangfeng = true;
            server.send(200, "text/plain", "OK");
        } else {
            server.send(400, "text/plain", "参数无效！");
        }
    } else {
        server.send(400, "text/plain", "缺少参数！"); 
    }
}
```
此函数将triggerShuangfeng设为true，此时主循环的程序就可以判断按钮点击并执行响应函数：
```language
if (triggerShuangfeng){
        shuangfeng(shuangfengNum);
        triggerShuangfeng = false; 
    }
```


